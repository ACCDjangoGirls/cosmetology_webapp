{% extends "base.html" %}



{% block content %}
<div>
    {% if user.is_authenticated %}
        <a href="{% url 'logout' %}?next={{ request.path }}">Logout</a>
    {% else %}
        <a href="{% url 'login' %}?next={{ request.path }}">Login</a>
    {% endif %}
</div>


<h1>All Appointments</h1>

<table class="table">
    <thead>
        <tr>

            <th>User</th>
            <th>Event</th>
            <th>Time</th>
            <th>Services</th>
            <th>Professional</th>
            <th>Edit</th>
            <th>Cancel</th>
        </tr>
    </thead>

    <tbody>
    {% for appointment in object_list %}
        <tr>
            <td>{{ appointment.user.username }} | </td> 
            <td>{{ appointment.event.name }} | </td> 
            <td>{{ appointment.time_and_date }} | </td> 
            <td>
                {% for service in appointment.services.all %}
                    {{ service.name }}{% if not forloop.last %}, {% endif %} {%comment%}we can use forloop.last to not add a comma in the end{%endcomment%}
                {% endfor %} | 
            </td>
            <td>{{ appointment.professional.name }} </td>
            <td>
                <a href="{% url 'Cosmetology:user_appointment_update' appointment.pk %}">Edit</a>
            </td>
            <td>
                <a href="{% url 'Cosmetology:user_appointment_cancel' appointment.pk %}">Cancel</a>
            </td>
        </tr>
    {% endfor %}
    </tbody>

</table>

{% endblock %}
